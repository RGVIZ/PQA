// ===============================
// SINGLE FILE TABLET AUDIT APP
// Tech: Flutter (Material)
// File: lib/main.dart
// ===============================
// This file contains:
// - Home Screen (2 options)
// - Audit Plan Acceptance list + actions
// - Audit Request list
// - Tablet friendly UI (wide cards, spacing)
// - Dummy data (replace with API later)

import 'package:flutter/material.dart';

void main() {
  runApp(const AuditApp());
}

class AuditApp extends StatelessWidget {
  const AuditApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      title: 'Audit Tablet App',
      theme: ThemeData(
        primarySwatch: Colors.blue,
        scaffoldBackgroundColor: const Color(0xFFF5F7FA),
        visualDensity: VisualDensity.standard,
      ),
      home: const HomeScreen(),
    );
  }
}

// ===============================
// HOME SCREEN
// ===============================
class HomeScreen extends StatelessWidget {
  const HomeScreen({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Audit Home')),
      body: Padding(
        padding: const EdgeInsets.all(24),
        child: GridView.count(
          crossAxisCount: 2,
          crossAxisSpacing: 24,
          mainAxisSpacing: 24,
          children: [
            _homeCard(
              context,
              icon: Icons.assignment_turned_in,
              title: 'Audit Plan Acceptance',
              onTap: () => Navigator.push(
                context,
                MaterialPageRoute(builder: (_) => const AuditPlanAcceptancePage()),
              ),
            ),
            _homeCard(
              context,
              icon: Icons.list_alt,
              title: 'Audit Request',
              onTap: () => Navigator.push(
                context,
                MaterialPageRoute(builder: (_) => const AuditRequestPage()),
              ),
            ),
          ],
        ),
      ),
    );
  }

  Widget _homeCard(BuildContext context,
      {required IconData icon,
      required String title,
      required VoidCallback onTap}) {
    return InkWell(
      onTap: onTap,
      child: Card(
        elevation: 4,
        shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(16)),
        child: Center(
          child: Column(
            mainAxisSize: MainAxisSize.min,
            children: [
              Icon(icon, size: 60, color: Colors.blue),
              const SizedBox(height: 16),
              Text(title,
                  textAlign: TextAlign.center,
                  style: const TextStyle(fontSize: 20, fontWeight: FontWeight.w600)),
            ],
          ),
        ),
      ),
    );
  }
}

// ===============================
// AUDIT PLAN ACCEPTANCE PAGE
// ===============================
class AuditPlanAcceptancePage extends StatelessWidget {
  const AuditPlanAcceptancePage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Audit Plan Acceptance')),
      body: ListView.builder(
        padding: const EdgeInsets.all(16),
        itemCount: dummyAudits.length,
        itemBuilder: (context, index) {
          final audit = dummyAudits[index];
          return _auditAcceptanceCard(context, audit);
        },
      ),
    );
  }

  Widget _auditAcceptanceCard(BuildContext context, Audit audit) {
    return Card(
      margin: const EdgeInsets.only(bottom: 16),
      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(12)),
      child: Padding(
        padding: const EdgeInsets.all(16),
        child: Column(crossAxisAlignment: CrossAxisAlignment.start, children: [
          Text(audit.name,
              style: const TextStyle(fontSize: 18, fontWeight: FontWeight.bold)),
          const SizedBox(height: 8),
          Text('Planned Date: ${audit.date}'),
          Text('Location: ${audit.location}'),
          const SizedBox(height: 12),
          Row(
            children: [
              ElevatedButton.icon(
                icon: const Icon(Icons.check),
                label: const Text('Approve'),
                onPressed: () {},
              ),
              const SizedBox(width: 12),
              ElevatedButton.icon(
                style: ElevatedButton.styleFrom(backgroundColor: Colors.red),
                icon: const Icon(Icons.close),
                label: const Text('Reject'),
                onPressed: () {},
              ),
              const SizedBox(width: 12),
              OutlinedButton.icon(
                icon: const Icon(Icons.calendar_today),
                label: const Text('Change Date'),
                onPressed: () {},
              ),
            ],
          )
        ]),
      ),
    );
  }
}

// ===============================
// AUDIT REQUEST PAGE
// ===============================
class AuditRequestPage extends StatelessWidget {
  const AuditRequestPage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Audit Requests')),
      body: ListView.builder(
        padding: const EdgeInsets.all(16),
        itemCount: dummyAudits.length,
        itemBuilder: (context, index) {
          final audit = dummyAudits[index];
          return Card(
            margin: const EdgeInsets.only(bottom: 16),
            shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(12)),
            child: ListTile(
              title: Text(audit.name),
              subtitle: Text('${audit.location} • ${audit.date}'),
              trailing: const Icon(Icons.chevron_right),
              onTap: () {},
            ),
          );
        },
      ),
    );
  }
}

// ===============================
// DATA MODEL + DUMMY DATA
// ===============================
class Audit {
  final String name;
  final String date;
  final String location;

  Audit({required this.name, required this.date, required this.location});
}

final List<Audit> dummyAudits = [
  Audit(name: 'Process Audit – Line 1', date: '12 Mar 2026', location: 'Chennai'),
  Audit(name: 'Supplier Audit – ABC Ltd', date: '18 Mar 2026', location: 'Pune'),
  Audit(name: 'Internal Audit – Safety', date: '25 Mar 2026', location: 'Bangalore'),
];
